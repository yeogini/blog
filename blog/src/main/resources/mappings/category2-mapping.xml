<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yedam.blog.biz.category.impl.CategoryMapper2"> 

	<!-- 목록 조회 -->
    <select id="getCategoryList" resultType="category2">
        <![CDATA[
			SELECT 
			CATEGORY_NO AS "categoryno",
			CATEGORY_NAME AS "categoryname",
			CATEGORY_CHK AS "cetegorychk",
			CATEGORY_MOUSER AS "cetegorymouser",
			TYPE AS "type",
			BORDER_TYPE AS "bordertype" 
			FROM USERS, CATEGORY
			WHERE USERS.USERID = CATEGORY.USERID
			AND CATEGORY.USERID = 'aaa'
        ]]>
    </select>
    
    <!-- 등록 -->
    <insert id="insertCategory" parameterType="category2">
    	<selectKey keyProperty="categoryno" resultType="string" order="BEFORE">
    		SELECT NVL(MAX(CATEGORY_NO),0) + 1 FROM CATEGORY
    	</selectKey>
    	<![CDATA[
    		INSERT INTO CATEGORY(CATEGORY_NO,CATEGORY_NAME,CATEGORY_CHK,CATEGORY_MOUSER,TYPE,USERID)
    		VALUES(#{categoryno},#{categoryname},1,0,'y',#{userid})
    	]]>
    </insert>
    
     <!-- 수정 -->
    <update id="updateCategory">
    	<![CDATA[
			UPDATE CATEGORY SET
				CATEGORY_NAME = #{categoryname},
				CATEGORY_CHK = #{categorychk},
				CATEGORY_MOUSER = #{categorymouser},
				TYPE = #{type}
			WHERE USERID = #{userid}
    	]]>
    </update>
    
   <!-- 삭제 -->
    <delete id="deleteCategory">
    	<![CDATA[
			DELTE CATEGORY
			WHERE CATEGORY_NAME = #{categoryname}
    	]]>
    </delete>

</mapper>
